# Example YAML configuration with resource requirements
#
# This configuration demonstrates how to specify resource requirements
# for components in a Plugboard process. Resources can be specified as:
# - Numerical values: cpu: 2.0
# - Milli-units: cpu: "250m" (equals 0.25)
# - Memory units: memory: "100Mi" (equals 100 * 1024 * 1024 bytes)

plugboard:
  process:
    type: plugboard.process.RayProcess
    connector_builder:
      type: plugboard.connector.RayConnector
    args:
      name: resource-example-process
      components:
        - type: examples.tutorials.004_using_ray.resources_example.DataProducer
          args:
            name: producer
            iters: 10
            resources:
              cpu: 1.0  # Requires 1 CPU

        - type: examples.tutorials.004_using_ray.resources_example.CPUIntensiveTask
          args:
            name: cpu-task
            resources:
              cpu: 2.0  # Requires 2 CPUs
              memory: "512Mi"  # Requires 512MB memory

        - type: examples.tutorials.004_using_ray.resources_example.GPUTask
          args:
            name: gpu-task
            resources:
              cpu: "500m"  # Requires 0.5 CPU (using milli-unit notation)
              gpu: 1  # Requires 1 GPU
              resources:
                custom_hardware: 2  # Custom resource requirement

      connectors:
        - source: producer.output
          target: cpu-task.x

        - source: cpu-task.y
          target: gpu-task.data
